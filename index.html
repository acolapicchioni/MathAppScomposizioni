<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Matematica per Bambine</title>
    <link rel="stylesheet" href="style.css">
    <!-- <script src="script.js" defer></script> --> <!-- Commented out old script -->
    <script type="module" src="js/main.js" defer></script> <!-- Added new modular script -->
</head>
<body>
    <div id="player-name-overlay">
        <div id="name-prompt-box">
            <h2>Come ti chiami?</h2>
            <input type="text" id="player-name" placeholder="Scrivi qui il tuo nome">
            <button id="start-game-button">Inizia a Giocare!</button>
        </div>
    </div>

    <div class="container">
        <h1>‚ô•Ô∏é Pratica di Matematica! ‚ô•Ô∏é</h1>

        <div id="score-container" style="display:none;">
            <span id="player-name-display">Giocatore</span> - Punteggio: <span id="current-score">0</span> | Record: <span id="high-score">0</span>
            <button id="nuova-partita-button">Nuova Partita</button>
        </div>
        
        <p id="welcome-message"></p>

        <div id="modalita-scelta" style="display:none;">
            <button id="show-tabelline">Gioca con le Tabelline</button>
            <button id="show-divisioni">Gioca con le Divisioni</button>
            <button id="show-moltiplicazioni-scomposizione">Gioca con le Moltiplicazioni (Scomposizione)</button>
        </div>

        <div id="game-container" style="display:none;">
            <div id="tabelline-section" class="game-section" style="display:none;">
                <h2>üêæ Tabelline üêæ</h2>
                <p id="domanda-tabellina"></p> 
                <div class="controls-wrapper">
                    <input type="number" id="risposta-tabellina" placeholder="La tua risposta">
                    <button id="controlla-tabellina-btn">Controlla</button>
                </div>
                <p id="feedback-tabellina"></p>
                <button id="torna-menu-tabelline-btn" class="torna-menu-btn">Cambia Modalit√†</button>
            </div>

            <hr id="section-divider" style="display:none;">

            <div id="divisioni-section" class="game-section" style="display:none;">
                <h2>üêæ Divisioni con Scomposizione üêæ</h2>
                
                <div id="livello-divisione-container" style="display:none;">
                    <label for="livello-divisione-select">Scegli il livello: </label>
                    <select id="livello-divisione-select">
                        <option value="1">Facile</option>
                        <option value="2">Medio</option>
                        <option value="3">Difficile</option>
                    </select>
                </div>

                <p id="domanda-divisione"></p> 
                <div id="scomposizione-steps">
                    <p>Scomponi la divisione (fino a 3 passaggi):</p>
                    <!-- Dynamically generated steps will be inserted here by script.js -->
                </div>
                <span id="label-somma-quozienti">Somma dei quozienti parziali = Risultato finale:</span>
                <input type="number" id="risposta-finale-divisione" class="scomp-input-final" placeholder="Risultato">
                <br>
                <button id="controlla-divisione-btn">Controlla Divisione</button>
                <button id="aiuto-divisione-btn">Aiuto!</button> 
                <p id="feedback-divisione"></p>
                <p id="hint-divisione" class="hint-text"></p> 
                <button id="torna-menu-divisioni-btn" class="torna-menu-btn">Cambia Modalit√†</button>
            </div>

            <div id="moltiplicazioni-scomposizione-section" class="game-section" style="display:none;">
                <h2>‚ú® Moltiplicazioni con Scomposizione ‚ú®</h2>
                
                <div id="livello-moltiplicazione-scomposizione-container" style="display:none;">
                    <label for="livello-moltiplicazione-scomposizione-select">Scegli il livello: </label>
                    <select id="livello-moltiplicazione-scomposizione-select">
                        <option value="1">Facile (2 parti)</option>
                        <option value="2">Medio (3 parti)</option>
                        <!-- <option value="3">Difficile (es. 3 parti con numeri pi√π grandi)</option> -->
                    </select>
                </div>

                <p id="domanda-moltiplicazione-scomposizione"></p> 
                <div id="scomposizione-moltiplicazione-steps">
                    <p>Scomponi il primo fattore e moltiplica:</p>
                    
                    <!-- Passaggio Scomposizione 1 -->
                    <div id="ms-passaggio-scomponi-1" class="scomposizione-passaggio-container">
                        <input type="number" id="ms-scomponi-fattore-1-parte-1" class="scomp-input" placeholder="Parte 1"> 
                        x <span id="ms-secondo-fattore-display-1"></span> = 
                        <input type="number" id="ms-scomponi-prodotto-1" class="scomp-input-result" placeholder="Prodotto 1">
                    </div>
                    <br>
                    <!-- Passaggio Scomposizione 2 -->
                    <div id="ms-passaggio-scomponi-2" class="scomposizione-passaggio-container">
                        <input type="number" id="ms-scomponi-fattore-1-parte-2" class="scomp-input" placeholder="Parte 2"> 
                        x <span id="ms-secondo-fattore-display-2"></span> = 
                        <input type="number" id="ms-scomponi-prodotto-2" class="scomp-input-result" placeholder="Prodotto 2">
                    </div>
                    <br>
                     <!-- Passaggio Scomposizione 3 (inizialmente nascosto, per livello medio/difficile) -->
                    <div id="ms-passaggio-scomponi-3" class="scomposizione-passaggio-container" style="display: none;">
                        <input type="number" id="ms-scomponi-fattore-1-parte-3" class="scomp-input" placeholder="Parte 3"> 
                        x <span id="ms-secondo-fattore-display-3"></span> = 
                        <input type="number" id="ms-scomponi-prodotto-3" class="scomp-input-result" placeholder="Prodotto 3">
                    </div>
                    <br><br>
                    <span id="ms-label-somma-prodotti">Somma dei prodotti parziali = Risultato finale:</span>
                    <input type="number" id="ms-risposta-finale-moltiplicazione" class="scomp-input-final" placeholder="Risultato Totale">
                </div>
                <br>
                <button id="controlla-moltiplicazione-scomposizione-btn">Controlla Moltiplicazione</button>
                <button id="aiuto-moltiplicazione-scomposizione-btn">Aiuto!</button> 
                <p id="feedback-moltiplicazione-scomposizione"></p>
                <p id="hint-moltiplicazione-scomposizione" class="hint-text"></p> 
                <button id="torna-menu-moltiplicazioni-scomposizione-btn" class="torna-menu-btn">Cambia Modalit√†</button>
            </div>
        </div>
    </div>
</body>
</html>